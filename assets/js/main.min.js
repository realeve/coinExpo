require.config({baseUrl:"assets/js",paths:{jquery:"jquery.min","jquery-weui":"jquery-weui","jquery.fullPage":"jquery.fullPage.min"},shim:{"jquery.fullPage":{deps:["jquery"]},"jquery-weui":{deps:["jquery"]}}});var exam={total:0,error:[],answerList:[],isAnswered:[],timeReleased:!1,isStarted:!1,timeLength:72e5,sourceList:[],eachScore:0,isSubmit:!1,maxAnswerNum:100,examPaper:"data"},lastPage;require(["jquery","jquery.fullPage","jquery-weui"],function(e){function a(e,a){var t=[],i=[];i=s(e.question.length);var n=[];i.map(function(e,a){n[e]=a});var r='<div class="section '+(a%2?"":"background_dark")+'">';r+='<h1 class="title answer-nums '+(a%2?"":"white-font")+'" style="font-size:2.5em">第<span>'+a+"</span>题</h1>",r+='<div class="weui_cells_title '+(a%2?"":"white-font")+'">'+e.title+"</div>",r+='<div class="weui_cells weui_cells_checkbox'+(a%2?"":" weui_cells_dark")+'" data-id='+(a-1)+" data-answer="+(n[e.answer-1]+1)+">",e.question.map(function(e,s){t[s]="",t[s]+='    <label class="weui_cell weui_check_label">',t[s]+='<div class="weui_cell_hd">',t[s]+='    <input type="radio" class="weui_check" name="radio'+(a-1)+'">',t[s]+='    <i class="weui_icon_checked"></i>',t[s]+="</div>",t[s]+='<div class="weui_cell_bd weui_cell_primary" data-value='+n[s]+">",t[s]+="    <p>"+e+"</p>",t[s]+="</div></label>"});for(var o="",l=0;l<e.question.length;l++)o+=t[i[l]];return r+=o+"</div>"+(a%2?"":'<img class="lg-component-img" src="./assets/img/bottom.png">')+"</div>"}function t(e,a){return Math.random()>.5?-1:1}function s(e){for(var a=[],s=0;e>s;s++)a.push(s);return a.sort(t)}function i(e,a){return e.substring(e.length-a,e.length)}function n(e){var a,t=new Date,s=t.getFullYear(),n=i("0"+(t.getMonth()+1),2),r=i("0"+t.getDate(),2),o=t.getHours(),l=t.getMinutes(),u=t.getSeconds();switch(e){case 0:a=s+"年"+n+"月"+r+"日";break;case 1:a=s+"-"+n+"-"+r+" "+o+":"+l+":"+u;break;case 2:a=s+"年"+n+"月"+r+"日"+o+"时"+l+"分"+u+"秒";break;case 3:a=s+"-"+n+"-"+r+" "+o+":"+l;break;case 4:a=s+"年"+n+"月"+r+"日  "+o+"时"+l+"分";break;case 5:a=n+"/"+r+"/"+s;break;case 6:a=s+"-"+n+"-"+r}return a}var r=[],o=-1==window.location.href.indexOf("?m=")?0:window.location.href.split("?m=")[1].split("&")[0];exam.maxAnswerNum=0===o?exam.maxAnswerNum:5,e('[name="sucessInfo"] .weui_msg_title').hide(),e.getJSON("./assets/data/"+exam.examPaper+".min.json",function(t){var i=t.length;exam.sourceList=s(i),i=i<=exam.maxAnswerNum?i:exam.maxAnswerNum,e('[name="timeLatest"]').text((exam.timeLength/60/1e3).toFixed(0)),e('[name="nums"]').text(i),exam.eachScore=100/i,e('[name="scores"]').text(exam.eachScore.toFixed(0));for(var n=0;i>n;n++)e('[name="form"]').before(a(t[exam.sourceList[n]],n+1)),exam.isAnswered[n]=0;for(lastPage=i+2,n=0;lastPage>n;n++)r[n]=n%2?"#fff":"#445"}).done(function(){l()});var l=function(){function a(){e.alert("答题时间到，系统将不再记录此后的得分，请提交当前成绩！","时间到！",function(){e.fn.fullpage.moveTo(lastPage)})}function t(a,t,s){"down"==s?a%2?e(".iSlider-arrow").removeClass("iSlider-white"):t%2&&e(".iSlider-arrow").addClass("iSlider-white"):t%2?e(".iSlider-arrow").addClass("iSlider-white"):e(".iSlider-arrow").removeClass("iSlider-white"),a>=lastPage-1&&"down"==s&&e(".iSlider-arrow").hide()}function s(a){var t=!0;return""==a.user_name?(e('[name="userName"]').parents(".weui_cell").find("label").css("color","#e64340"),t=!1):e('[name="userName"]').parents(".weui_cell").find("label").attr("style",""),""==a.user_id?(e('[name="userCard"]').parents(".weui_cell").find("label").css("color","#e64340"),t=!1):e('[name="userCard"]').parents(".weui_cell").find("label").attr("style",""),t}function i(a,t){e('[name="sucessInfo"] .weui_msg_desc').html('您一共得了<span name="totalScore" style="font-weight:bold;color:#445"> '+a+" </span>分"),e(".weui_icon_msg").last().addClass("weui_icon_success").removeClass("weui_icon_warn"),e('[name="scoreLink"]').attr("href","./score.html?uid="+t),e('[name="sucessInfo"] .weui_msg_title').text("提交成功").show()}e(".weui_check_label").on("click",function(a){if(exam.timeReleased)a.preventdefault(),e.fn.fullpage.moveTo(lastPage),e.alert("答题时间到，系统将不再记录此后的得分，请提交当前成绩！","时间到！");else{var t=e(this).parents(".weui_cells"),s=e(this).find(".weui_cell_primary"),i=s.data("value")+1==t.data("answer")?1:0;exam.answerList[t.data("id")]=i,exam.isAnswered[t.data("id")]=1}}),e("#fullpage").fullpage({easingcss3:"cubic-bezier(0.25, 0.5, 0.35, 1.15)",onLeave:function(s,i,n){exam.timeLength&&1==s&&!exam.timeReleased&&(exam.isStarted=!0,setTimeout(function(){exam.timeReleased=!0,a()},exam.timeLength),setTimeout(function(){e.toast("考试时间已过去三分之一")},.33*exam.timeLength),setTimeout(function(){e.toast("考试时间仅剩三分之一")},.67*exam.timeLength)),t(s,i,n)},afterLoad:function(a,t){t==lastPage?e(".iSlider-arrow").hide():t>lastPage?(e(".iSlider-arrow").hide(),exam.isSubmit||setTimeout(function(){e.fn.fullpage.moveSectionUp()},500)):e(".iSlider-arrow").show()}}),e('[name="form"] input').on("focus",function(){e(this).parents(".weui_cell").find("label").attr("style","")}),e('[name="form"] .weui_btn').on("click",function(a){exam.error=[],exam.total=0,exam.answerList.map(function(e,a){exam.total+=e,e||exam.error.push(exam.sourceList[a])});var t="";exam.error.map(function(e){t+=e+","}),t=t.length?t.substring(0,t.length-1):"-1";var r={user_name:e('[name="userName"]').val(),user_id:e('[name="userCard"]').val(),score:(exam.total*exam.eachScore).toFixed(0),errors:t,rec_time:n(1)};s(r)?(e('[name="totalScore"]').text(r.score),e('[name="sucessInfo"] .weui_msg_title').show(),e.ajax({url:"http://cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/setJZExamData",data:r,success:function(a){0==a.status?e('[name="sucessInfo"] .weui_msg_title').text("提交失败，请裁屏保存分数或稍后重试"):-1==a.status?e('[name="sucessInfo"] .weui_msg_title').text("该用户已提交数据"):i(r.score,a.uid),0==a.status?e('[name="sucessInfo"] h1').text("提交失败，请稍后重试"):-1==a.status?e('[name="sucessInfo"] h1').text("该用户已提交数据"):i(r.score,a.uid)},error:function(a){var t;0==a.status?t="提交失败，请稍后重试":-1==a.status&&(t="该用户已提交数据"),e('[name="sucessInfo"] .weui_msg_title').text(t).show()}}).always(function(){exam.isSubmit=!0,e.fn.fullpage.moveSectionDown()})):e.toast("请输入个人用户信息","cancel")})}});
//# sourceMappingURL=main.min.js.map